<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>chatbot-style UI</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #fff;
      color: #000;
    }
    .navbar {
      display: flex;
       justify-content: space-between; 
      align-items: center;
      height: 60px;  
      padding: 16px 24px;
      border-bottom: 1px solid #ddd;
    }
    
     .navbar-right {
      display: flex;
      align-items: center;
      gap: 12px;
    } 
     .navbar-center {
      font-weight: bold;
      font-size: 28px;
      text-align: center;
      flex-grow: 1; 
    }
    .blackbox-btn {
      background-color: #000;
      color: #fff;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
    }
     .login-btn {
      background-color: black;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      position: relative;
    }

    .login-dropdown {
      position: absolute;
      top: 60px;
      right: 20px;
      width: 260px;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      display: none;
      z-index: 999;
    }

    .login-dropdown h2 {
      margin-top: 0;
    }

    .login-dropdown label {
      display: block;
      margin-bottom: 6px;
      font-weight: bold;
    }

    .login-dropdown input {
      width: 100%;
      padding: 8px;
      margin-bottom: 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .login-dropdown .submit-btn {
      background-color: #000;
      color: #fff;
      padding: 10px;
      width: 100%;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .login-dropdown .submit-btn:hover {
      background-color: #222;
    }
  .main {
      padding: 32px;
      text-align: center;
    }
    .main h1 {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 12px;
    }
    .main .tagline {
      display: inline-block;
      background-color: #e8f0fe;
      color: #1a73e8;
      font-size: 14px;
      padding: 6px 12px;
      border-radius: 8px;
      margin-bottom: 16px;
    }
    .chatbox {
      margin: 40px auto;
      max-width: 700px;
      background-color: #fafafa;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 5px 12px rgba(0,0,0,0.08);
    }
    .chatbox form {
      display: flex;
      align-items: center;
      gap: 8px;
      border: 1px solid #ddd;
      border-radius: 16px;
      padding: 8px 12px;
      background-color: white;
    }
    .chatbox input {
      flex: 1;
      border: none;
      font-size: 16px;
      background: none;
      outline: none;
      padding: 6px;
    }
    .chatbox button {
      border: none;
      background: none;
      font-size: 20px;
      cursor: pointer;
    }
    .chatbox-toolbar {
      display: flex;
      justify-content: space-between;
      margin-top: 16px;
      font-size: 14px;
      flex-wrap: wrap;
      gap: 10px;
    }
    .chatbox-toolbar .left,
    .chatbox-toolbar .right {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    .banner {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #f2f2f2;
      padding: 16px 24px;
      border-radius: 16px;
      max-width: 900px;
      margin: 20px auto;
    }
    .banner .left span {
      background: #000;
      color: #fff;
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 6px;
      margin-right: 8px;
    }
    .banner button {
      padding: 6px 14px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
    }
    .banner .close-btn {
      background: transparent;
      color: #333;
    }
     .banner .download-btn {
      background-color: #000;
      color: #fff;
    }
    .footer {
      padding: 12px;
      text-align: center;
      font-size: 12px;
      color: #777;
    }
    .message-container {
      max-width: 700px;
      margin: 10px auto;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .message {
      padding: 10px 16px;
      border-radius: 14px;
      max-width: 90%;
      word-wrap: break-word;
    }
    .message.user {
      background-color: #daf1ff;
      align-self: flex-end;
    }
    .message.bot {
      background-color: #f1f1f1;
      align-self: flex-start;
    }
     .speak-btn {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      align-self: flex-start;
    }
      .listening {
      color: red;
    }
    .toolbar-btn {
  display: inline-block;
  background-color: #000;
  color: #fff;
  padding: 6px 14px;
  border-radius: 6px;
  text-decoration: none;
  font-size: 14px;
  transition: background-color 0.3s;
}

.toolbar-btn:hover {
  background-color: #333;
}

button {
      padding: 10px 20px;
      border-radius: 12px;
      border: none;
      background: black;
      color: white;
      cursor: pointer;
      font-size: 16px;
      display: inline-flex;
      align-items: center;
      gap: 8px; 
    }
    button:hover {
      background: #333;
    }
    svg {
      width: 18px;
      height: 18px;
      stroke: white;
      stroke-width: 2;
      fill: none;
    }

 </style>
</head>
<body>
  <div class="navbar">
    <div class="navbar-center">
      <strong>CHATBOTAI</strong>
    </div>
<div class="navbar-right">
  <button class="login-btn" onclick="openSidebar()">Login</button>
</div>
</div>
<div class="main">
    <h1 id="mainHeading">Ask Catbot AI Anything</h1>
  </div>
  <div class="chatbox">
     <div id="chatMessages"></div>
<form id="chatForm">
      <input id="chatInput" type="text" placeholder="Message chatbot" />
      <button type="button" id="micBtn">üé§</button>
      <button type="submit">‚¨ÜÔ∏è</button>
    </form>
    <div class="chatbox-toolbar">
  <div class="left" id="toolbar-left">
  <a href="https://example.com/deep-research" class="toolbar-btn" target="_blank" rel="noopener noreferrer">üìö Deep Research</a>
</div>
<div class="right" id="toolbar-right">
  <a href="#" id="upload-link" class="toolbar-btn">üñä Upload</a>
  <input type="file" id="fileInput" style="display:none" />
</div>

</div>
  </div>
  <div class="banner">
    <div class="left">
      <span>New</span>
      Experience the power of CHATBOT IDE - Code faster with AI Agents.
    </div>
    <div class="right">
      <button onclick="alert('Close clicked!')">
 
  <svg viewBox="0 0 24 24">
    <line x1="18" y1="6" x2="6" y2="18"/>
    <line x1="6" y1="6" x2="18" y2="18"/>
  </svg>
  Close
</button>

<button onclick="alert('Download clicked!')">

  <svg viewBox="0 0 24 24">
    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
    <polyline points="7 10 12 15 17 10"/>
    <line x1="12" y1="15" x2="12" y2="3"/>
  </svg>
  Download
</button>
    </div>
  </div>
  <div class="footer">
    By using Chatbot you agree to the Terms and Privacy.
  </div>
<script>
    const uploadLink = document.getElementById('upload-link');
  const fileInput = document.getElementById('fileInput');

  uploadLink.addEventListener('click', (e) => {
    e.preventDefault(); 
    fileInput.click();   
  });

  fileInput.addEventListener('change', () => {
    const file = fileInput.files[0];
    if (file) {
      alert(`Selected file: ${file.name}`);
    }
  });
    function openSidebar() {
    document.getElementById("loginSidebar").style.width = "300px";
  }

  function closeSidebar() {
    document.getElementById("loginSidebar").style.width = "0";
  }

  const chatForm = document.getElementById('chatForm');
  const chatInput = document.getElementById('chatInput');
  const chatMessages = document.getElementById('chatMessages');
  const micBtn = document.getElementById('micBtn');
  let voices = [];
  function loadVoices() {
    voices = window.speechSynthesis.getVoices();
    if (!voices.length) {
      window.speechSynthesis.onvoiceschanged = () => {
        voices = window.speechSynthesis.getVoices();
      };
    }
  }
  loadVoices();
  function speak(text, lang = 'ta-IN') {
    if (!('speechSynthesis' in window) || !text) return;
    window.speechSynthesis.cancel();
    const utterance = new SpeechSynthesisUtterance(text);
    const voicesList = window.speechSynthesis.getVoices();
    let voice = voicesList.find(v => v.lang.toLowerCase().startsWith(lang.toLowerCase()));
    if (!voice) voice = voicesList.find(v => v.lang.startsWith('en'));
    if (voice) utterance.voice = voice;
    utterance.lang = voice ? voice.lang : lang;
    window.speechSynthesis.speak(utterance);
  }
function addMessage(text, sender = 'bot', speakText = null, speakLang = 'ta-IN') {
    const container = document.createElement('div');
    container.classList.add('message-container');
const msg = document.createElement('div');
    msg.classList.add('message', sender);
    msg.textContent = text;
    container.appendChild(msg);
if (sender === 'bot' && speakText) {
      const btn = document.createElement('button');
      btn.textContent = 'üîä';
      btn.classList.add('speak-btn');
      btn.onclick = () => speak(speakText, speakLang);
      container.appendChild(btn);
    }
chatMessages.appendChild(container);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }
async function translateToTamil(text) {
    try {
      const res = await fetch('https://libretranslate.de/translate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          q: text,
          source: 'en',
          target: 'ta',
          format: 'text'
        })
      });
      const data = await res.json();
      return data.translatedText;
    } catch (err) {
      console.error("Translation failed:", err);
      return null;
    }
  }
chatForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const userText = chatInput.value.trim();
    if (!userText) return;
addMessage(userText, 'user');
    chatInput.value = '';
 try {
      const res = await fetch(`/api/chatbot?question=${encodeURIComponent(userText)}`);
      const data = await res.json();
      const answer = data.answer;
const tamilAnswer = await translateToTamil(answer);
      if (tamilAnswer) {
        addMessage(`${answer}\n\n‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç: ${tamilAnswer}`, 'bot', tamilAnswer, 'ta-IN');
        speak(tamilAnswer, 'ta-IN');
      } else {
        addMessage(answer, 'bot', answer, 'en-US');
        speak(answer, 'en-US');
      }
    } catch (err) {
      const errMsg = "Something went wrong. Try again later.";
      addMessage(errMsg, 'bot', errMsg, 'en-US');
      speak(errMsg, 'en-US');
    }
  });
let recognition, isListening = false;
if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SpeechRecognition();
    recognition.lang = 'en-US';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;
    recognition.onstart = () => {
      isListening = true;
      micBtn.classList.add('listening');
    };
    recognition.onend = () => {
      isListening = false;
      micBtn.classList.remove('listening1hdsafkjhkdsfsvvvv');
    };
    recognition.onerror = (event) => {
      isListening = false;
      micBtn.classList.remove('listening');
    };
    recognition.onresult = (event) => {
      const transcript = event.results[0][0].transcript;
      chatInput.value = transcript;
      chatInput.focus();
    };
    micBtn.addEventListener('click', () => {
      if (isListening) recognition.stop();
      else recognition.start();
    });
  } else {
    micBtn.disabled = true;
    micBtn.title = 'Speech Recognition not supported';
  }
</script>
</body>
</html>